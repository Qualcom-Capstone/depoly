http:
  routers:
    django-app-router:
      rule: "Host(`api.autonotify.store`) && PathPrefix(`/api/v1`)"
      entryPoints:
        - websecure
      service: django-app-service
      tls:
        certResolver: letsencrypt
      middlewares:
        - cors
        - rate-limit

  services:
    django-app-service:
      loadBalancer:
        servers:
          - url: "http://backend:8000"

  middlewares:
    cors:
      headers:
        accessControlAllowOriginList:
          - "*"                                  # 모든 호스트 허용
        accessControlAllowMethods:
          - GET
          - POST
          - PUT
          - PATCH
          - DELETE
          - OPTIONS
        accessControlAllowHeaders:
          - "*"
        accessControlAllowCredentials: true
        addVaryHeader: true


  auth:
    basicAuth:
      users:
        - "autonotify:$2y$05$nk3Iz..3eY6AhbgWcPJz/.hv2Wvbnq6ddgSjrnoLsxDvMPWdm4Jga"

  dashboard-auth:
    basicAuth:
      users:
        - "autonotify:$2y$05$nk3Iz..3eY6AhbgWcPJz/.hv2Wvbnq6ddgSjrnoLsxDvMPWdm4Jga"

  rate-limit:
    rateLimit:
      average: 50
      burst: 100